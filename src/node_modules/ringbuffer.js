import { EventEmitter } from 'events';

class RingBuffer extends EventEmitter {
  constructor(opts) {
    super();
    this.records = [];
    this.limit = opts.bufferSize;
  }

  write(log) {
    this.records.push(log);
    if (this.records.length > this.limit) {
      this.records.shift();

      this.emit('buffer shift');
      return false;
    }
    return true;
  }

  read() {
    return this.records.shift();
  }
}

export { RingBuffer as default };
